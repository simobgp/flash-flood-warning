<!-- FlashFloodWarning.net ‚Äî Ultimate Homepage (SEO ‚Ä¢ E-E-A-T ‚Ä¢ AdSense ‚Ä¢ Live Map) -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flash Flood Warning Near Me Today | Live US Alerts Map, Safety Tips & By-State Updates</title>
<meta name="description" content="Check live Flash Flood Warning near you today. Interactive US alerts map, watch vs warning, driving advice (Turn Around, Don‚Äôt Drown), and by-state updates for Arizona, Florida, California, New Jersey, Texas, Colorado, Chicago, New York, Austin, Dallas & Houston." />
<link rel="canonical" href="https://flashfloodwarning.net/" />

<!-- Performance hints -->
<link rel="preconnect" href="https://unpkg.com" />
<link rel="dns-prefetch" href="https://unpkg.com" />
<link rel="preconnect" href="https://tile.openstreetmap.org" />
<link rel="dns-prefetch" href="https://tile.openstreetmap.org" />

<meta name="robots" content="index,follow,max-image-preview:large" />
<meta name="theme-color" content="#2563eb" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Flash Flood Warning Near Me Today" />
<meta property="og:description" content="Live US flash flood alerts & map. Find out if your area is under a warning today, by city or ZIP." />
<meta property="og:url" content="https://flashfloodwarning.net/" />
<meta property="og:image" content="https://flashfloodwarning.net/og-image.jpg" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Flash Flood Warning Near Me Today" />
<meta name="twitter:description" content="Interactive alerts map, safety tips, and by-state updates." />
<meta name="twitter:image" content="https://flashfloodwarning.net/og-image.jpg" />

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous">

<style>
  :root{
    --bg:#f7fafc; --text:#0f172a; --muted:#475569; --card:#ffffff; --stroke:#e5e7eb;
    --brand:#2563eb; --brand2:#3b82f6; --accent:#0ea5e9; --radius:16px; --shadow:0 10px 28px rgba(2,6,23,.08);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  a{color:var(--brand);text-decoration:none} a:hover{text-decoration:underline}
  .wrap{max-width:1120px;margin:0 auto;padding:24px}
  .sr-only{position:absolute;left:-9999px}

  /* Header / Hero */
  header.hero{background:linear-gradient(180deg,#fff,#f0f7ff);border-bottom:1px solid var(--stroke)}
  .hero .wrap{display:grid;gap:16px;padding:28px 24px}
  h1{font-size:34px;line-height:1.15;margin:6px 0}
  .lead{color:var(--muted)}
  .pill{display:inline-block;background:#eef2ff;color:#1e40af;border:1px solid #c7d2fe;padding:6px 10px;border-radius:999px;font-weight:600}
  .row{display:flex;gap:10px;flex-wrap:wrap}

  /* ALERT BAR (NEW) */
  .alert-bar{
    margin-top:8px; padding:10px 12px; border-radius:10px;
    border:1px solid #e5e7eb; background:#fff; color:#0f172a;
    box-shadow:0 6px 18px rgba(2,6,23,.06); font-weight:700;
  }
  .alert-ok   { background:#ecfdf5; border-color:#a7f3d0; color:#065f46; }   /* Safe */
  .alert-warn { background:#fff7ed; border-color:#fed7aa; color:#7c2d12; }   /* Flood alerts (not FFW) */
  .alert-ffw  { background:#fef2f2; border-color:#fecaca; color:#7f1d1d; }   /* Flash Flood Warning */

  /* Search */
  .searchbar{display:grid;grid-template-columns:1fr auto auto;gap:10px;background:#fff;border:1px solid var(--stroke);border-radius:12px;padding:10px;box-shadow:var(--shadow)}
  .searchbar input{border:none;outline:none;font:600 15px ui-sans-serif}
  .btn{border:1px solid var(--stroke);background:#fff;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn.primary{
    background:linear-gradient(180deg,var(--brand2),var(--brand)); color:#fff; border-color:#1e40af;
    text-shadow:0 1px 0 rgba(0,0,0,.25); box-shadow:0 6px 16px rgba(37,99,235,.25);
  }
  .btn.primary:focus-visible{ outline:3px solid #93c5fd; outline-offset:2px; }

  /* Sections & cards */
  section{margin:28px 0}
  .card{background:var(--card);border:1px solid var(--stroke);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
  .kicker{font-size:13px;color:#334155;text-transform:uppercase;letter-spacing:.08em}
  .muted{color:var(--muted)}
  .list{margin:0;padding-left:18px}
  .grid{display:grid;gap:14px}
  .cols-3{grid-template-columns:repeat(3,1fr)} @media (max-width:960px){.cols-3{grid-template-columns:1fr}}

  /* Quick links */
  .state-grid a{display:flex;justify-content:space-between;align-items:center;padding:12px;border:1px solid var(--stroke);border-radius:12px;background:#fff;color:var(--text)}
  .state-grid a:hover{border-color:#bfdbfe;box-shadow:0 8px 20px rgba(37,99,235,.16)}

  /* Notices */
  .warning{border-left:6px solid #b91c1c}
  .good{border-left:6px solid #16a34a}

  /* Map block */
  #ffw-light{background:linear-gradient(180deg,#ffffff,var(--bg));border:1px solid var(--stroke);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
  #ffw-light h2{font:700 26px/1.25 ui-sans-serif,system-ui;margin:0 0 6px}
  #ffw-light p.lead{color:var(--muted);margin:0 0 14px}
  .ffw-toolbar{display:grid;grid-template-columns:1fr auto auto;gap:10px;margin:12px 0 14px}
  @media (max-width:840px){.ffw-toolbar{grid-template-columns:1fr 1fr}}
  @media (max-width:540px){.ffw-toolbar{grid-template-columns:1fr}}
  .ffw-search{display:flex;align-items:center;gap:8px;background:#ffffffcc;backdrop-filter:blur(6px);border:1px solid var(--stroke);border-radius:12px;padding:8px 10px}
  .ffw-search input{border:none;outline:none;flex:1;background:transparent;color:var(--text);font:500 14px/1.2 ui-sans-serif}
  .ffw-btn{border:1px solid var(--stroke);background:#fff;border-radius:12px;padding:10px 14px;font:600 14px/1 ui-sans-serif;cursor:pointer;transition:.2s;box-shadow:0 4px 16px rgba(37,99,235,.06)}
  .ffw-btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(37,99,235,.12)}
  .ffw-btn.primary{background:linear-gradient(180deg,var(--brand2),var(--brand));color:#fff;border-color:transparent}
  .ffw-toggle{display:flex;align-items:center;gap:10px;border:1px solid var(--stroke);background:#ffffffcc;padding:10px 14px;border-radius:12px}
  .ffw-toggle input{width:18px;height:18px;accent-color:var(--brand)}
  #ffw-map{height:640px;width:100%;border-radius:14px;overflow:hidden;border:1px solid var(--stroke);animation:fadeIn .5s ease; position:relative;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
  .ffw-meta{margin-top:6px;color:var(--muted);font:500 12px/1.4 ui-sans-serif}
  .ffw-legend{margin-top:12px;background:#ffffffcc;border:1px solid var(--stroke);border-radius:12px;padding:12px;box-shadow:var(--shadow);max-width:520px}

  /* MAP LOADING OVERLAY (NEW) */
  .map-loading{
    position:absolute; inset:0; display:flex; flex-direction:column;
    align-items:center; justify-content:center; gap:10px;
    background:linear-gradient(180deg, #ffffffcc, #f7fafccc);
    backdrop-filter: blur(4px);
    font-weight:600; color:#334155; z-index: 400;
  }
  .spinner{
    width:28px; height:28px; border-radius:50%;
    border:3px solid #cbd5e1; border-top-color:#2563eb;
    animation: spin .9s linear infinite;
  }
  @keyframes spin{ to{ transform: rotate(360deg)} }
  @media (prefers-reduced-motion: reduce){
    .spinner{ animation: none; border-top-color:#2563eb }
  }

  /* LEGEND swatches ‚Äî fix for colors not showing (no inline styles) */
  .ffw-row{display:flex;align-items:center;gap:10px;margin:6px 0;color:#64748b}
  .ffw-swatch{
    display:inline-block; width:14px; height:14px; border-radius:4px;
    border:1px solid #0001; flex:0 0 14px;
  }
  .swatch-extreme{  background:#7f1d1d; }
  .swatch-severe{   background:#b91c1c; }
  .swatch-moderate{ background:#f97316; }
  .swatch-minor{    background:#f59e0b; }
  .swatch-other{    background:#94a3b8; }

  footer{border-top:1px solid var(--stroke);margin-top:28px}
  footer .wrap{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;color:var(--muted)}
</style>
</head>
<body>

<header class="hero" role="banner">
  <div class="wrap">
    <span class="kicker">Real-Time Alerts</span>
    <h1>Flash Flood Warning Near Me Today</h1>

    <!-- ALERT BAR (NEW) -->
    <div id="alert-bar" class="alert-bar" role="status" aria-live="polite">
      Checking active flash flood alerts‚Ä¶
    </div>

    <p class="lead">Instantly check if your area is under a <strong>Flash Flood Warning</strong>, view the live US map, and learn what to do right now. Built for Arizona, Florida, California, New Jersey, Texas‚Äîand major cities like <em>Denver</em>, <em>Chicago</em>, <em>New York (Brooklyn)</em>, <em>Austin</em>, <em>Dallas</em> and <em>Houston</em>.</p>

    <!-- Primary intent: near me / today / map -->
    <div class="searchbar" role="search" aria-label="Search location">
      <input id="q" placeholder="Search city, state, or ZIP (e.g., Phoenix, AZ or 33101)" aria-label="Search by city, state, or ZIP" />
      <button id="btn-search" class="btn">Search</button>
      <button id="btn-geo" class="btn primary">üìç Use My Location</button>
    </div>

    <div class="row" aria-label="Quick intents">
      <span class="pill">Near Me</span>
      <span class="pill">Today</span>
      <span class="pill">Live Map</span>
      <span class="pill">Watch vs Warning</span>
      <span class="pill">Driving Safety</span>
    </div>
  </div>
</header>

<main class="wrap" role="main">
  <!-- ===== LIVE MAP ===== -->
  <section id="map" aria-label="Live Flash Flood Warning Map">
    <div id="ffw-light">
      <h2>Live Flash Flood Warning Map ‚Äî United States</h2>
      <p class="lead">Use the interactive map to check <strong>flash flood warnings near you today</strong>. Search by <em>city, state, or ZIP</em>, or tap <em>Use My Location</em>. Toggle to show <strong>Flash Flood Warning only</strong>, and add radar overlays for precipitation, clouds, wind, or pressure.</p>

      <div class="ffw-toolbar" role="group" aria-label="Map controls">
        <div class="ffw-search" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3m1.3-5.4a6.7 6.7 0 11-13.4 0 6.7 6.7 0 0113.4 0z" stroke="#64748b" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="ffw-query" type="text" placeholder="Phoenix, AZ ‚Äî 33101 ‚Äî Brooklyn, NY" aria-label="Search city, state, or ZIP">
          <button id="ffw-search-btn" class="ffw-btn">Search</button>
        </div>
        <button id="ffw-my-location" class="ffw-btn primary" aria-label="Use my location">üìç Use My Location</button>
        <label class="ffw-toggle" for="ffw-only"><input type="checkbox" id="ffw-only" checked> Show <strong>Flash Flood Warning</strong> only</label>
      </div>

      <!-- MAP + LOADING OVERLAY (NEW) -->
      <div id="ffw-map" role="region" aria-label="Interactive flash flood map">
        <div id="map-loading" class="map-loading" aria-hidden="false">
          <div class="spinner" aria-label="Loading map and alerts"></div>
          <div>Loading live map & alerts‚Ä¶</div>
        </div>
      </div>

      <div class="ffw-meta" id="ffw-updated">Last updated: ‚Äî</div>

      <!-- Legend with CSS classes (no inline styles) -->
      <div class="ffw-legend" aria-label="Legend">
        <strong>Alert Severity</strong>
        <div class="ffw-row"><span class="ffw-swatch swatch-extreme"></span> Extreme</div>
        <div class="ffw-row"><span class="ffw-swatch swatch-severe"></span> Severe (Flash Flood Warning)</div>
        <div class="ffw-row"><span class="ffw-swatch swatch-moderate"></span> Moderate</div>
        <div class="ffw-row"><span class="ffw-swatch swatch-minor"></span> Minor</div>
        <div class="ffw-row"><span class="ffw-swatch swatch-other"></span> Other/Unknown Flood Alerts</div>
      </div>
    </div>
  </section>

  <!-- ===== QUICK LINKS ===== -->
  <section id="states" aria-label="States & Cities">
    <div class="card">
      <h2>Flash Flood Warnings by State & City</h2>
      <p class="muted">Jump to detailed guidance for the most searched areas:</p>
      <div class="grid cols-3 state-grid" role="navigation" aria-label="Popular areas">
        <a href="#arizona"><span>Arizona Flash Flood Warning Today</span><span>‚Üí</span></a>
        <a href="#florida"><span>Florida Flash Flood Warning Updates</span><span>‚Üí</span></a>
        <a href="#california"><span>California Flash Flood Warning Map</span><span>‚Üí</span></a>
        <a href="#new-jersey"><span>New Jersey Flash Flood Warning Alerts</span><span>‚Üí</span></a>
        <a href="#texas"><span>Texas Flash Flood Warning</span><span>‚Üí</span></a>
        <a href="#alabama-atlanta"><span>Alabama &amp; Atlanta Flood Alerts</span><span>‚Üí</span></a>
        <a href="#colorado-denver"><span>Colorado &amp; Denver Flash Flood Warning</span><span>‚Üí</span></a>
        <a href="#chicago-illinois"><span>Chicago &amp; Illinois Flood Risk</span><span>‚Üí</span></a>
        <a href="#ny-brooklyn"><span>New York &amp; Brooklyn Flood Reports</span><span>‚Üí</span></a>
        <a href="#tx-cities"><span>Austin, Dallas, and Houston Flood Watch</span><span>‚Üí</span></a>
      </div>
    </div>
  </section>

  <!-- ===== TODAY ===== -->
  <section id="today" aria-label="Today: key guidance">
    <div class="grid cols-3">
      <div class="card warning">
        <h3 class="kicker">Driving Advisory</h3>
        <p><strong>Turn Around, Don‚Äôt Drown.</strong> Six inches of water can stall a car; two feet can sweep it away. Avoid low crossings and underpasses during a warning.</p>
      </div>
      <div class="card">
        <h3 class="kicker">Watch vs Warning</h3>
        <p><strong>Watch:</strong> flooding possible. <strong>Warning:</strong> flooding is occurring or imminent‚Äîact now and move to higher ground.</p>
      </div>
      <div class="card good">
        <h3 class="kicker">Be Ready</h3>
        <ul class="list">
          <li>Enable Wireless Emergency Alerts + a trusted weather app.</li>
          <li>Keep a go-bag: water, flashlight, radio, meds, documents.</li>
          <li>Know local evacuation routes and safe meeting points.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ===== STATE SECTIONS ===== -->
  <section id="arizona" class="card">
    <h2>Arizona Flash Flood Warning Today</h2>
    <p>Arizona‚Äôs monsoon (Jun‚ÄìSep) triggers fast runoff in washes and slot canyons‚Äîespecially around Phoenix, Tucson, and Flagstaff. Avoid desert trails when storms build; never cross flowing washes. Prepare a go-bag and follow AZEIN updates.</p>
  </section>

  <section id="florida" class="card">
    <h2>Florida Flash Flood Warning Updates</h2>
    <p>Tropical downpours and hurricane season (Jun‚ÄìNov) cause rapid street flooding‚Äîespecially in South Florida (Miami, Fort Lauderdale, Boca Raton). Use county alerts daily, prep sandbags in low-lying lots, and avoid coastal underpasses at high tide.</p>
  </section>

  <section id="california" class="card">
    <h2>California Flash Flood Warning Map</h2>
    <p>Southern CA and Sierra foothills see flash flooding after Pacific storms. Burn-scar slopes raise debris-flow risk‚Äîavoid canyon roads in heavy rain. Monitor Cal OES for evacuation guidance; LA, San Diego and Riverside often face drain overflows.</p>
  </section>

  <section id="new-jersey" class="card">
    <h2>New Jersey Flash Flood Warning Alerts</h2>
    <p>Nor‚Äôeasters and tropical remnants flood urban corridors (Newark, Elizabeth, Trenton) and rivers (Passaic, Raritan). Avoid basements/underpasses during warnings and check local OEM channels for shelter locations.</p>
  </section>

  <section id="texas" class="card">
    <h2>Texas Flash Flood Warning</h2>
    <p>‚ÄúFlash Flood Alley‚Äù (Austin‚ÄìSan Antonio‚ÄìDallas) sees rapid creek rises. One foot of moving water can carry most vehicles‚Äîchoose higher routes. Sign up for ReadyHarris/TDEM alerts; never bypass low-water crossing barricades.</p>
  </section>

  <section id="alabama-atlanta" class="card">
    <h2>Alabama &amp; Atlanta Flood Alerts</h2>
    <p>Gulf-fed thunderstorms drive urban flooding in Birmingham and across metro Atlanta. Avoid low bridges/creek crossings and pond-prone parking lots. Keep a NOAA Weather Radio for overnight alerts.</p>
  </section>

  <section id="colorado-denver" class="card">
    <h2>Colorado &amp; Denver Flash Flood Warning</h2>
    <p>Front Range cloudbursts + burn scars (e.g., Cameron Peak) raise debris-flow risk in Denver/Boulder canyons. Watch local NWS alerts and sirens in summer; avoid mountain roads during storms.</p>
  </section>

  <section id="chicago-illinois" class="card">
    <h2>Chicago &amp; Illinois Flood Risk</h2>
    <p>Intense summer rain overwhelms storm drains in Chicago, flooding underpasses and basements. Follow Cook County advisories, elevate valuables, and consider a sump pump with battery backup.</p>
  </section>

  <section id="ny-brooklyn" class="card">
    <h2>New York &amp; Brooklyn Flood Reports</h2>
    <p>Subway and basement units flood quickly in cloudbursts (e.g., Ida). Never enter flooded stations or basement apartments during warnings‚Äîcheck NYC Emergency Management and MTA advisories.</p>
  </section>

  <section id="tx-cities" class="card">
    <h2>Austin, Dallas, and Houston Flood Watch</h2>
    <p>Bayou systems and low-lying neighborhoods in Houston flood rapidly. Subscribe to ReadyHarris alerts; cut power if water nears outlets and keep a waterproof go-bag. Avoid underpasses along major corridors during torrential rain.</p>
  </section>

  <!-- ===== FAQ ===== -->
  <section id="faq" class="card">
    <h2>Flash Flood Warning ‚Äî FAQs</h2>
    <h3>Is there a flash flood warning near me right now?</h3>
    <p>Use the live map above or enable phone emergency alerts to receive official NWS notifications by location.</p>

    <h3>What‚Äôs the difference between a Watch and a Warning?</h3>
    <p><strong>Watch:</strong> flooding possible. <strong>Warning:</strong> flooding is occurring or imminent‚Äîact now and move to higher ground.</p>

    <h3>Can I drive during a Flash Flood Warning?</h3>
    <p>No. Six inches can stall a car; two feet can sweep it away. Choose higher routes or delay travel.</p>

    <h3>How do I get alerts on my phone?</h3>
    <p>Turn on Wireless Emergency Alerts (WEA) and install a trusted weather app (Weather Channel, AccuWeather, MyRadar) for localized notifications.</p>
  </section>

  <!-- ===== E-E-A-T / Editorial box ===== -->
  <section id="about" class="card" aria-label="About & Editorial">
    <h2>About FlashFloodWarning.net</h2>
    <p>We summarize <em>official US weather alerts</em> to help Americans act fast during severe weather. Sources include the National Weather Service (NWS), state emergency offices, and USGS river gauges. Our content is educational, ad-safe, and regularly refreshed.</p>
    <ul class="list">
      <li><strong>Data:</strong> NWS alerts (GeoJSON/APIs), USGS high-flow maps</li>
      <li><strong>Purpose:</strong> quick ‚Äúnear me‚Äù checks, live map, and practical safety steps</li>
      <li><strong>Contact:</strong> <a href="/contact/">Reach our team</a> ‚Ä¢ <a href="/about-us/">Editorial policy</a></li>
    </ul>
  </section>

  <!-- ===== Resources ===== -->
  <section id="resources" class="card">
    <h2>Official Resources</h2>
    <ul class="list">
      <li><a href="https://www.weather.gov/safety/flood-watch-warning" target="_blank" rel="noopener nofollow">NWS: Flood Watch vs. Warning</a></li>
      <li><a href="https://www.weather.gov/safety/flood-map" target="_blank" rel="noopener nofollow">NWS: Interactive Flood Information Map</a></li>
      <li><a href="https://waterwatch.usgs.gov/?id=ww_flood" target="_blank" rel="noopener nofollow">USGS: Flood &amp; High Flow Map</a></li>
      <li><a href="https://www.accuweather.com/en/us/severe-weather" target="_blank" rel="noopener nofollow">AccuWeather: Severe Weather Map</a></li>
    </ul>
    <p class="muted">Definitions and guidance reflect National Weather Service materials.</p>
  </section>
</main>

<footer role="contentinfo">
  <div class="wrap">
    <div>&copy; 2025 FlashFloodWarning.net ‚Äî Real Warnings. Real Safety.</div>
    <div><a href="/privacy-policy/">Privacy Policy</a> ‚Ä¢ <a href="/about-us/">About Us</a> ‚Ä¢ <a href="/contact/">Contact</a></div>
  </div>
</footer>

<noscript>
  <div class="wrap card" style="margin:20px">For full functionality, please enable JavaScript to view the live map and alerts.</div>
</noscript>

<!-- Leaflet JS -->
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>

<script>
/* ===== Map + Alerts (NWS + OpenWeatherMap) ===== */
(() => {
  const OWM_KEY = '9de28224b0150cb4d352ce7fb58309cd'; // Insert your key
  const NWS_URL = 'https://api.weather.gov/alerts/active?status=actual&message_type=alert&event=Flood%2CFlash%20Flood%20Warning%2CFlood%20Warning%2CFlash%20Flood%20Statement';

  function ready(fn){ document.readyState!=='loading'?fn():document.addEventListener('DOMContentLoaded',fn); }

  ready(()=> {
    /* header search -> map */
    const inputTop = document.getElementById('q');
    const btnTopSearch = document.getElementById('btn-search');
    const btnTopGeo = document.getElementById('btn-geo');

    /* build map */
    const map = L.map('ffw-map', { scrollWheelZoom:true }).setView([37.8, -96], 4);
    const base = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18,attribution:'¬© OpenStreetMap'}).addTo(map);
    const baseLite = L.tileLayer('https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',{maxZoom:18,attribution:'¬© OpenStreetMap (grayscale)'});

    /* OWM overlays */
    const owm = n => L.tileLayer(`https://tile.openweathermap.org/map/${n}/{z}/{x}/{y}.png?appid=${OWM_KEY}`, {opacity:.65, attribution:'Weather ¬© OpenWeatherMap'});
    const layerPrecip = owm('precipitation_new');
    const layerClouds = owm('clouds_new');
    const layerWind   = owm('wind_new');
    const layerPress  = owm('pressure_new');
    layerPrecip.addTo(map);

    /* Alerts layer */
    const alerts = L.geoJSON(null, {
      style: f => ({ color:'#0f172a', weight:1, fillColor: sevColor(f.properties?.severity, f.properties?.event), fillOpacity:.35 }),
      onEachFeature: (f, layer) => {
        const p = f.properties||{};
        const isFFW = /flash flood warning/i.test(p.event||'');
        const head = esc(p.headline) || esc(p.event) || 'Flood Alert';
        const area = esc(p.areaDesc);
        const eff = time(p.effective), end = time(p.ends || p.expires);
        const sev = esc(p.severity), urg = esc(p.urgency), cert = esc(p.certainty);
        const url = esc(p['@id'] || p.id || '#');
        layer.bindPopup(`
          <div>
            <div style="font-weight:700;margin-bottom:6px;${isFFW?'color:#b91c1c':''}">${isFFW?'Flash Flood Warning':'Alert'}</div>
            ${area?`<div><small>Area:</small> ${area}</div>`:''}
            <div><small>Severity:</small> ${sev||'‚Äî'} ‚Ä¢ <small>Certainty:</small> ${cert||'‚Äî'} ‚Ä¢ <small>Urgency:</small> ${urg||'‚Äî'}</div>
            ${eff?`<div><small>Effective:</small> ${eff}</div>`:''}
            ${end?`<div><small>Ends:</small> ${end}</div>`:''}
            <div style="margin-top:6px;">${head}</div>
            ${p.instruction?`<div style="margin-top:6px;"><em>${esc(p.instruction)}</em></div>`:''}
            ${url && url!=='#'?`<div style="margin-top:8px;"><a href="${url}" target="_blank" rel="noopener">View official NWS alert</a></div>`:''}
          </div>
        `);
      }
    }).addTo(map);

    function sevColor(sev, evt){
      const isFFW = /flash flood warning/i.test(evt||'');
      if (isFFW) return '#b91c1c';
      switch ((sev||'').toLowerCase()){
        case 'extreme': return '#7f1d1d';
        case 'severe':  return '#b91c1c';
        case 'moderate':return '#f97316';
        case 'minor':   return '#f59e0b';
        default:        return '#94a3b8';
      }
    }
    const esc = s => (s||'').toString().replace(/[<>]/g,'');
    const time = t => { if(!t) return ''; try{const d=new Date(t); return d.toLocaleString(undefined,{dateStyle:'medium', timeStyle:'short'})}catch(e){return t} };

    /* fetch alerts */
    const $only = document.getElementById('ffw-only');
    const $updated = document.getElementById('ffw-updated');
    const $bar = document.getElementById('alert-bar');
    const $loading = document.getElementById('map-loading');

    async function loadAlerts(){
      try{
        const res = await fetch(NWS_URL, { headers:{'Accept':'application/geo+json'} });
        const gj = await res.json();

        const featsAll = (gj.features||[]);
        const feats = featsAll.filter(f=>{
          const evt = (f.properties?.event||'').toLowerCase();
          return $only.checked ? evt.includes('flash flood warning') : /flood/.test(evt);
        });

        alerts.clearLayers(); alerts.addData({type:'FeatureCollection', features:feats});
        try{ const b = alerts.getBounds(); if (b.isValid()) map.fitBounds(b.pad(.12)); }catch(e){}

        // Update "Last updated"
        if ($updated) $updated.textContent = 'Last updated: ' + new Date().toLocaleTimeString();

        // Update ALERT BAR (NEW)
        if ($bar){
          const total = featsAll.length;
          const ffwCount = featsAll.filter(f => /flash flood warning/i.test(f.properties?.event||'')).length;
          $bar.classList.remove('alert-ok','alert-warn','alert-ffw');
          if (ffwCount > 0){
            $bar.classList.add('alert-ffw');
            $bar.textContent = `‚ö†Ô∏è ${ffwCount} Flash Flood Warning active now`;
          } else if (total > 0){
            $bar.classList.add('alert-warn');
            $bar.textContent = `‚ÑπÔ∏è ${total} flood-related alerts are active (no Flash Flood Warning).`;
          } else {
            $bar.classList.add('alert-ok');
            $bar.textContent = `‚úÖ No active flood alerts for the U.S. right now`;
          }
        }

        // Hide MAP LOADING (NEW)
        if ($loading){ $loading.setAttribute('aria-hidden','true'); $loading.style.display='none'; }
      }catch(e){
        if ($updated) $updated.textContent = 'Alerts unavailable right now.';
        if ($loading){
          const textNode = $loading.querySelector('div:last-child');
          if (textNode) textNode.textContent = 'Alerts unavailable right now.';
        }
        console.warn('NWS error', e);
      }
    }
    loadAlerts(); setInterval(loadAlerts, 5*60*1000);
    $only.addEventListener('change', loadAlerts);

    /* layers control */
    L.control.layers(
      { 'Streets (OSM)': base, 'Light (Grayscale)': baseLite },
      { '‚òî Precipitation': layerPrecip, '‚òÅ Clouds': layerClouds, 'üí® Wind': layerWind, 'üß≠ Pressure': layerPress },
      { position:'topright', collapsed:true }
    ).addTo(map);

    /* geocoding (Nominatim) */
    async function geocode(q){
      const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}&countrycodes=us&limit=1&addressdetails=1`;
      const r = await fetch(url, { headers:{'Accept':'application/json'}});
      const j = await r.json();
      if (j && j[0]){
        const lat = parseFloat(j[0].lat), lon = parseFloat(j[0].lon);
        map.flyTo([lat, lon], 11, { duration: 1.1 });
        L.circleMarker([lat, lon], { radius:7, color:'#2563eb', fillColor:'#3b82f6', fillOpacity:.85 })
         .addTo(map).bindPopup(`Search: <strong>${esc(j[0].display_name)}</strong>`).openPopup();
      } else { alert('No results. Try another city, state, or ZIP.'); }
    }

    /* header search -> map */
    function searchFromHeader(){ const v=(inputTop.value||'').trim(); if(v) geocode(v); }
    btnTopSearch.addEventListener('click', searchFromHeader);
    inputTop.addEventListener('keydown', e=>{ if (e.key==='Enter'){ e.preventDefault(); searchFromHeader(); }});
    btnTopGeo.addEventListener('click', ()=>{
      if (!navigator.geolocation) return alert('Geolocation not supported.');
      navigator.geolocation.getCurrentPosition(pos=>{
        const { latitude, longitude } = pos.coords;
        map.flyTo([latitude, longitude], 11, { duration: 1.1 });
        L.circleMarker([latitude, longitude], { radius:7, color:'#16a34a', fillColor:'#22c55e', fillOpacity:.85 })
         .addTo(map).bindPopup('You are here').openPopup();
      }, ()=> alert('Unable to access your location.'));
    });

    /* toolbar search */
    const ffwQ = document.getElementById('ffw-query');
    document.getElementById('ffw-search-btn').addEventListener('click', ()=>{ const q=(ffwQ.value||'').trim(); if(q) geocode(q); });
    ffwQ.addEventListener('keydown', e=>{ if (e.key==='Enter'){ e.preventDefault(); document.getElementById('ffw-search-btn').click(); }});

    /* quick-jump anchors recenter map */
    const anchors = {
      '#arizona':[34.0,-111.7], '#florida':[27.8,-81.7], '#california':[36.5,-119.5],
      '#new-jersey':[40.1,-74.5], '#texas':[31.0,-99.0], '#alabama-atlanta':[33.6,-86.8],
      '#colorado-denver':[39.7,-105.0], '#chicago-illinois':[41.9,-87.7], '#ny-brooklyn':[40.65,-73.95],
      '#tx-cities':[29.76,-95.37]
    };
    window.addEventListener('hashchange', ()=>{ const h=location.hash; if (anchors[h]) map.flyTo(anchors[h], 7, {duration:1}); });
  });
})();
</script>

<!-- JSON-LD: FAQ + WebSite + Organization -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"Is there a flash flood warning near me right now?","acceptedAnswer":{"@type":"Answer","text":"Use the live map or enable phone emergency alerts to receive official NWS notifications by location."}},
    {"@type":"Question","name":"What‚Äôs the difference between a Watch and a Warning?","acceptedAnswer":{"@type":"Answer","text":"A Watch means flooding is possible. A Warning means flooding is occurring or imminent ‚Äî act now and move to higher ground."}},
    {"@type":"Question","name":"Can I drive during a Flash Flood Warning?","acceptedAnswer":{"@type":"Answer","text":"No. Even shallow moving water is dangerous. Choose higher routes or delay travel."}},
    {"@type":"Question","name":"How do I get alerts on my phone?","acceptedAnswer":{"@type":"Answer","text":"Turn on Wireless Emergency Alerts (WEA) and install a trusted weather app for localized push notifications."}}
  ]
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebSite",
  "name":"FlashFloodWarning.net",
  "url":"https://flashfloodwarning.net/",
  "potentialAction":{
    "@type":"SearchAction",
    "target":"https://flashfloodwarning.net/?q={search_term_string}",
    "query-input":"required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Organization",
  "url":"https://flashfloodwarning.net/",
  "name":"FlashFloodWarning.net",
  "logo":"https://flashfloodwarning.net/logo.png",
  "sameAs":[
    "https://www.weather.gov/",
    "https://waterwatch.usgs.gov/"
  ]
}
</script>

</body>
</html>
