<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIVE Flash Flood Warning Tracker | US Radar & Real-Time Map</title>
    <meta name="description" content="Track live Flash Flood Warnings with our interactive US radar map. Real-time NWS alerts, state-by-state flood counts, and emergency safety guides. Update every 60 seconds.">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --danger: #e11d48; --warning: #f59e0b; --dark: #0f172a; --live: #22c55e; --slate: #f1f5f9; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background: var(--slate); color: var(--dark); line-height: 1.6; }

        /* Navigation */
        .top-nav { background: #fff; border-bottom: 2px solid #e2e8f0; padding: 12px 0; position: sticky; top: 0; z-index: 1000; }
        .flex-row { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .logo { font-weight: 900; color: var(--danger); font-size: 1.5rem; text-decoration: none; letter-spacing: -1px; }
        
        /* Stats Dashboard */
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        .stat-card { background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #e2e8f0; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .stat-number { display: block; font-size: 2.8rem; font-weight: 800; color: var(--danger); line-height: 1; margin-bottom: 5px; }
        .stat-label { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: #64748b; letter-spacing: 1px; }
        .live-dot { height: 10px; width: 10px; background: var(--live); border-radius: 50%; display: inline-block; margin-right: 5px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        /* Search Bar */
        .search-bar { background: var(--dark); padding: 50px 0; color: #fff; text-align: center; }
        .search-box { background: #fff; padding: 6px; border-radius: 50px; display: flex; max-width: 550px; margin: 25px auto 0; border: 4px solid rgba(255,255,255,0.1); }
        .search-box input { flex: 1; border: none; padding-left: 25px; border-radius: 50px; outline: none; font-size: 1rem; }
        .search-box button { background: var(--danger); color: #fff; border: none; padding: 12px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .search-box button:hover { background: #be123c; }

        /* Main Content Map/Sidebar */
        .main-container { max-width: 1200px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 1fr 340px; gap: 20px; }
        #ffw-map { height: 600px; background: #fff; border-radius: 16px; border: 1px solid #e2e8f0; z-index: 1; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .sidebar { background: #fff; border-radius: 16px; border: 1px solid #e2e8f0; padding: 20px; height: 600px; display: flex; flex-direction: column; }
        .alert-item { background: var(--slate); padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 5px solid var(--danger); font-size: 0.85rem; cursor: pointer; transition: 0.2s; }
        .alert-item:hover { transform: translateX(5px); background: #e2e8f0; }

        /* Content Sections */
        .seo-content { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .faq-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .faq-item { background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #e2e8f0; }
        
        /* State Hub Links */
        .state-grid { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .state-link { background: #fff; padding: 8px 15px; border-radius: 8px; border: 1px solid #e2e8f0; text-decoration: none; color: var(--dark); font-size: 0.85rem; font-weight: 600; }
        .state-link:hover { background: var(--danger); color: #fff; border-color: var(--danger); }

        /* AdSense Slots */
        .ad-slot { background: #f8fafc; height: 90px; margin: 30px 0; display: flex; align-items: center; justify-content: center; color: #94a3b8; border: 1px dashed #cbd5e1; border-radius: 12px; font-size: 0.8rem; }

        footer { background: var(--dark); color: #94a3b8; padding: 60px 20px; margin-top: 60px; }
        footer a { color: #fff; text-decoration: none; font-size: 0.9rem; }
        footer h4 { color: #fff; margin-bottom: 20px; }

        @media (max-width: 950px) { 
            .main-container { grid-template-columns: 1fr; } 
            .sidebar { height: 450px; }
            .search-box { margin: 20px 20px 0; }
        }
    </style>
</head>
<body>

<div class="top-nav">
    <div class="flex-row">
        <a href="#" class="logo">FLASH FLOOD TRACKER</a>
        <div style="font-size: 0.8rem; font-weight: 800; color: var(--live);">
            <span class="live-dot"></span> LIVE NWS DATA ACTIVE
        </div>
    </div>
</div>

<section class="search-bar">
    <div class="container">
        <h1>US Flash Flood Warning Map</h1>
        <p>Real-time Doppler radar alerts and National Weather Service tracking.</p>
        <div class="search-box">
            <input type="text" id="locInput" placeholder="Enter City, State, or Zip Code...">
            <button onclick="searchLoc()">FIND ALERTS</button>
        </div>
    </div>
</section>

<div class="dashboard-grid">
    <div class="stat-card">
        <span class="stat-number" id="count-warn">0</span>
        <span class="stat-label">Active Warnings</span>
    </div>
    <div class="stat-card">
        <span class="stat-number" id="count-states">0</span>
        <span class="stat-label">States Affected</span>
    </div>
    <div class="stat-card">
        <span class="stat-number" id="last-update" style="font-size: 1.8rem; padding: 10px 0;">--:--</span>
        <span class="stat-label">Last Sync (NWS API)</span>
    </div>
    <div class="stat-card">
        <span class="stat-number" id="timer" style="font-size: 1.8rem; padding: 10px 0; color: var(--warning);">00:59</span>
        <span class="stat-label">Next Update In</span>
    </div>
</div>

<div class="container ad-slot" style="max-width:1200px; margin: 0 auto;">-- AdSense Header Leaderboard --</div>

<main class="main-container">
    <div id="ffw-map"></div>
    
    <aside class="sidebar">
        <h3 style="margin-bottom: 15px; display:flex; align-items:center; gap:10px;">
            <i class="fa-solid fa-tower-broadcast" style="color:var(--danger)"></i> Live Alert Stream
        </h3>
        <div id="alert-feed" style="overflow-y: auto; flex-grow: 1; padding-right: 5px;">
            <p style="color: #64748b; font-size: 0.9rem;">Connecting to NWS satellite servers...</p>
        </div>
        <div class="ad-slot" style="height: 180px; margin-bottom: 0; background: #f1f5f9;">-- Sidebar Ad --</div>
    </aside>
</main>

<section class="seo-content">
    <h2 style="border-left: 5px solid var(--danger); padding-left: 15px; margin-bottom: 30px;">Flood Safety & Emergency Resources</h2>
    
    <div class="faq-grid">
        <div class="faq-item">
            <h3><i class="fa-solid fa-car-burst" style="color:var(--danger)"></i> Turn Around Don't Drown</h3>
            <p>Most flash flood fatalities occur in vehicles. If you encounter a flooded road, turn around. It only takes 12 inches of fast-moving water to sweep away a car.</p>
        </div>
        <div class="faq-item">
            <h3><i class="fa-solid fa-house-chimney-flood" style="color:var(--danger)"></i> Home Protection</h3>
            <p>Move to the highest level of your home if a Flash Flood Warning is issued. Avoid basements and underground areas where water collects rapidly.</p>
        </div>
    </div>

    <div class="ad-slot">-- Mid-Article AdSense Unit --</div>

    <div class="faq-grid">
        <div class="faq-item">
            <h3>‚ö†Ô∏è Flood Watch vs. Warning</h3>
            <p>A <strong>Watch</strong> means flooding is possible‚Äîbe prepared. A <strong>Warning</strong> means a flash flood is happening or imminent‚Äîtake action immediately.</p>
        </div>
        <div class="faq-item">
            <h3>üåä Water Restoration</h3>
            <p>If your property is affected, contact water damage restoration experts immediately to prevent mold and structural compromise.</p>
        </div>
    </div>

    <h3 style="margin-top: 50px;">Track Alerts by State</h3>
    <div class="state-grid">
        <a href="#" class="state-link">Alabama</a><a href="#" class="state-link">Arizona</a><a href="#" class="state-link">California</a>
        <a href="#" class="state-link">Florida</a><a href="#" class="state-link">Georgia</a><a href="#" class="state-link">Louisiana</a>
        <a href="#" class="state-link">Mississippi</a><a href="#" class="state-link">Nevada</a><a href="#" class="state-link">New York</a>
        <a href="#" class="state-link">Texas</a><a href="#" class="state-link">Utah</a><a href="#" class="state-link">Washington</a>
    </div>
</section>

<footer>
    <div class="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; padding: 0 20px;">
        <div>
            <h4>About Flash Flood Tracker</h4>
            <p style="font-size: 0.9rem;">We provide real-time, life-saving weather data by syncing directly with the National Weather Service (NWS) API. Our mission is public safety.</p>
        </div>
        <div>
            <h4>Important Links</h4>
            <a href="https://www.weather.gov" rel="nofollow" target="_blank">Official NWS Website</a><br>
            <a href="https://www.ready.gov/floods" rel="nofollow" target="_blank">Ready.gov Flood Prep</a><br>
            <a href="https://www.fema.gov" rel="nofollow" target="_blank">FEMA.gov</a>
        </div>
        <div>
            <h4>Legal & Privacy</h4>
            <a href="#">Privacy Policy</a><br>
            <a href="#">Terms of Service</a><br>
            <a href="#">Contact Support</a>
        </div>
    </div>
    <div style="text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid #334155; font-size: 0.8rem;">
        &copy; 2025 Flash Flood Safety Portal. Data provided by NOAA/NWS API. Not a government agency.
    </div>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const map = L.map('ffw-map').setView([39.8, -98.5], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    const alertLayer = L.layerGroup().addTo(map);

    let refreshSec = 60;

    async function getNWSAlerts() {
        try {
            // Updated API call to include more flood types (Warning, Watch, Advisory, Statement)
            const res = await fetch('https://api.weather.gov/alerts/active?event=Flash%20Flood%20Warning,Flash%20Flood%20Watch,Flood%20Warning,Flood%20Advisory,Flood%20Statement');
            const data = await res.json();
            
            alertLayer.clearLayers();
            const feed = document.getElementById('alert-feed');
            feed.innerHTML = "";
            
            let totalAlerts = 0;
            let states = new Set();

            if (data.features && data.features.length > 0) {
                L.geoJSON(data, {
                    style: (f) => ({ 
                        color: f.properties.event.includes('Warning') ? '#e11d48' : '#f59e0b', 
                        weight: 4, 
                        fillOpacity: 0.5 
                    }),
                    onEachFeature: (f, l) => {
                        l.bindPopup(`<strong>${f.properties.event}</strong><br>${f.properties.areaDesc}<br><br><small>${f.properties.instruction || "Monitor local news for updates."}</small>`);
                    }
                }).addTo(alertLayer);

                data.features.forEach(f => {
                    totalAlerts++;
                    const area = f.properties.areaDesc;
                    const stateMatch = area.match(/([A-Z]{2})/);
                    if(stateMatch) states.add(stateMatch[0]);

                    const item = document.createElement('div');
                    item.className = 'alert-item';
                    item.style.borderLeftColor = f.properties.event.includes('Warning') ? '#e11d48' : '#f59e0b';
                    item.innerHTML = `<strong>${f.properties.event}</strong><br>${f.properties.areaDesc.split(';')[0]}`;
                    item.onclick = () => {
                        const c = f.geometry.coordinates[0][0];
                        map.flyTo([c[1], c[0]], 10);
                    };
                    feed.appendChild(item);
                });
            } else {
                feed.innerHTML = "<p style='color: #64748b; font-size: 0.9rem;'>No active flood warnings currently detected in the US.</p>";
            }

            document.getElementById('count-warn').innerText = totalAlerts;
            document.getElementById('count-states').innerText = states.size;
            document.getElementById('last-update').innerText = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            refreshSec = 60;
        } catch (e) {
            console.error("NWS Sync Error");
        }
    }

    // Refresh Loop
    setInterval(() => {
        refreshSec--;
        if(refreshSec < 0) {
            getNWSAlerts();
            refreshSec = 60;
        }
        document.getElementById('timer').innerText = `00:${refreshSec < 10 ? '0' : ''}${refreshSec}`;
    }, 1000);

    function searchLoc() {
        const val = document.getElementById('locInput').value;
        if(val) {
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${val}&countrycodes=us`)
            .then(r => r.json()).then(d => { if(d[0]) map.flyTo([d[0].lat, d[0].lon], 11); });
        }
    }

    window.onload = getNWSAlerts;
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Flash Flood Tracker",
  "url": "https://simobgp.github.io/flash-flood-warning/",
  "applicationCategory": "WeatherApplication",
  "operatingSystem": "Web",
  "about": {
    "@type": "Event",
    "name": "Live Flood Alerts"
  }
}
</script>

</body>
</html>
